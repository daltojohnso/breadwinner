var brd=function(){"use strict";var a=function(a){brd.model.initModule(),brd.shell.initModule(a)};return{initModule:a}}();brd.bar=function(){"use strict";var a,t,n,r,e,o,i,d,s,l,c,u,m,f,b={barSpeed:100,daysInMonth:void 0,currentBarClass:"brd-bar-current",prevBarClass:"brd-bar-prev",dayOneBarClass:"brd-bar-one"},p={$calendar:void 0,dateStrings:{},bar:{currentBar:void 0,currentDay:void 0,currentPercent:void 0,timeoutIds:[]},expenses:void 0,income:void 0,totalBarPercent:void 0},v={};return f=function(a,t,r){p.expenses=a,p.income=t,"set"===r?n(0):"update"===r&&n(b.barSpeed)},c=function(a){return b.daysInMonth=a,b.daysInMonth},n=function(a){var t,n,r=p.totalBarPercent,e=p.expenses,i=p.income,d=b.daysInMonth;i&&(t=e/(i/d)*100,n=t-r,p.totalBarPercent+=n,p.totalBarPercent<0?p.totalBarPercent=0:p.totalBarPercent>100*d&&(p.totalBarPercent=100*d),o(n,a))},r=function(){var a=p.$calendar.fullCalendar("getDate").clone().endOf("month").date();return p.bar.currentDay>a?!1:(p.bar.currentBar.removeClass(b.currentBarClass),p.bar.currentDay++,p.bar.currentPercent=0,p.bar.currentBar=$("#brd-bar-"+p.bar.currentDay),p.bar.currentBar.addClass(b.currentBarClass),p.bar.currentBar)},e=function(){return p.bar.currentDay<1?!1:(p.bar.currentBar.removeClass(b.currentBarClass),p.bar.currentDay--,p.bar.currentPercent=100,p.bar.currentBar=$("#brd-bar-"+p.bar.currentDay),p.bar.currentBar.addClass(b.currentBarClass),p.bar.currentBar)},o=function(a,t){var n,i,d=p.bar.currentBar,s=p.bar.currentPercent;return d&&0!==a?(n=s+a,void(n>0&&100>n?(d.animate({width:n+"%"},t,"linear"),p.bar.currentPercent=n):a>0?(d.animate({width:"100%"},t,"linear"),i=n-100,d=r(),d&&setTimeout(function(){o(i,t)},t)):(d.animate({width:0},t,"linear"),d=e(),d&&setTimeout(function(){o(n,t)},t)))):!1},i=function(a){return 10>a?"0"+a:""+a},d=function(){function a(a){return 10>a?"0"+a:""+a}var t,n,r,e,o;t=p.$calendar.fullCalendar("getDate"),r=t.year(),n=t.month()+1,e=a(n),o=r+"-"+e,p.dateStrings.yearMonthString=o},t=function(){var a=p.$calendar,t=a.find(".fc-week");v={$calendar:a,$days:a.find(".fc-day"),$weeks:t}},s=function(){for(var a,t,n=p.$calendar.fullCalendar("getDate").clone().endOf("month").date(),r=1;n>=r;r++)a=i(r),t=p.dateStrings.yearMonthString+"-"+a,$('td[data-date="'+t+'"]').append('<div class="brd-bar" id="brd-bar-'+r+'"></div>')},l=function(){p.bar.currentDay=1,p.bar.currentPercent=0,p.bar.currentBar=$("#brd-bar-1"),p.bar.currentBar.addClass("brd-bar-1 brd-bar-current")},u=function(a){return a?(c(a.endOfMonth),f(a.expenses,a.income,"set"),!0):!1},m=function(){p.$calendar=void 0,p.dateStrings={},p.expenses=0,p.income=0,p.totalBarPercent=0,b.daysInMonth=void 0},a=function(a,n){m(),p.$calendar=a,d(),t(),s(),l(),u(n)},{initModule:a,set:f}}(),brd.buttons=function(){"use strict";var a,t,n={mainHtml:['<div class="brd-buttons-main">',"<ul>",'<li class="brd-buttons-expense">','<a href="#" class="brd-link-transaction pure-button">+</a>',"</li>",'<li class="brd-buttons-salary">','<a href="#" class="brd-link-salary pure-button">$</a>',"</li>","</ul>","</div>"].join("")},r={$appendTarget:void 0},e={};return t=function(){var a=r.$appendTarget;e={$appendTarget:a,$transactionLink:a.find(".brd-link-transaction"),$salaryLink:a.find(".brd-link-salary")}},a=function(a){r.$appendTarget=a,a.html(n.mainHtml),t(),e.$transactionLink.click(function(a){$.event.trigger("transactionbuttonclick")}),e.$salaryLink.click(function(a){$.event.trigger("salarybuttonclick")})},{initModule:a}}(),brd.cal=function(){"use strict";var a,t,n,r,e,o,i,d,s,l,c={dateFormat:"DD-MM-YYYY",dayClickTimer:200,eventBackgroundColor:"#FF3333"},u={$calendar:void 0,calendarRatio:void 0,windowHeight:void 0,dayClicks:0,dayClickTimer:void 0},m={};return a=function(){var a=u.$calendar;m={$calendar:a,$day:a.find(".fc-day"),$todayButton:a.find(".fc-today-button"),$prevButton:a.find(".fc-prev-button"),$nextButton:a.find(".fc-next-button"),$buttons:a.find(".fc-button")}},n=function(a,t,n,r,e){var o,i=u.$calendar.fullCalendar("clientEvents",n.format(c.dateFormat));if(i.length){var d=i[0];d[e]||(d.count++,d.title=d.count+"",d[e]=!0,u.$calendar.fullCalendar("updateEvent",d))}else o={title:"1",count:1,start:n,backgroundColor:c.eventBackgroundColor,id:n.format(c.dateFormat)},o[e]=!0,u.$calendar.fullCalendar("renderEvent",o)},d=function(a){var t,r;for(r in a)a.hasOwnProperty(r)&&(t=a[r],n(t.name,t.amount,moment(t.date,c.dateFormat),t.type,t.id))},r=function(){return m.$calendar.fullCalendar("getDate")},e=function(){return r().clone().endOf("month").date()},i=function(a){m.$calendar.fullCalendar("gotoDate",a),$.event.trigger("calendarchange",[a.format("MM-YYYY")])},o=function(){m.$day.on("click",function(a){u.dayClicks++;var t=moment($(this).data().date);1===u.dayClicks?u.dayClickTimer=setTimeout(function(){$.event.trigger("dayclick",[t]),u.dayClicks=0},c.dayClickTimer):(clearTimeout(u.dayClickTimer),$.event.trigger("daydbclick",[t]),u.dayClicks=0)}).on("dbclick",function(a){a.preventDefault()}),$(window).resize(s)},s=function(){var a=u.resizeTimer;clearTimeout(a),u.resizeTimer=setTimeout(function(){var a=m.$calendar,t=window.innerWidth/(window.innerHeight-120);a.fullCalendar("option","aspectRatio",t)},300)},l=function(t){m.$day.unbind("click"),m.$day.unbind("dbclick"),d(t),a(),o()},t=function(t){u.$calendar=t,t.fullCalendar({eventRender:function(a,t){t.find(".brd-event-close").click(function(){u.$calendar.fullCalendar("removeEvents",a._id),$.event.trigger("deletetransaction",[a])})},eventClick:function(a,t,n){},eventAfterRender:function(a,t,n){$(t).css("width","50px")}}),a(),m.$buttons.click(function(a){var t=m.$calendar.fullCalendar("getDate").format("MM-YYYY");$.event.trigger("calendarchange",[t])}),o(),s()},{initModule:t,createEvent:n,getDate:r,getDaysInMonth:e,showMonth:i,addEvents:d,recalculate:l}}(),brd.cal.num=function(){var a,t,n,r,e,o={$calendar:void 0};return n=function(){var t=o.$calendar;a={$calendar:t,$days:t.find(".fc-day")}},t=function(a){o.$calendar=a,n()},{initModule:t,increment:r,decrement:e}}(),brd.count=function(){var a,t,n={};return a=function(a){n.$calendar=a,t()},{initModule:a}}(),brd.form.day=function(){"use strict";var a,t,n,r,e,o,i,d,s,l={html:['<div class="brd-form-day-wrapper">',"<h3>June 2, 2015</h3>",'<div class="brd-form-day-transaction-list">',"</div>",'<div class="brd-transaction-info">',"</div>",'<div class="brd-form-day-buttons">',"</div>","</div>"].join(""),infoHtml:['<div class="brd-transaction-info-wrapper">',"Name<br>Amount<br>Date","</div>"].join(""),transactionHtml:{}},c={position:"closed"};return t=function(){var t=c.$formTarget;a={$formTarget:t,$wrapper:t.find(".brd-form-day-wrapper"),$title:t.find(".brd-form-day-wrapper h3"),$transactionsWrapper:t.find(".brd-form-day-transaction-list"),$transactions:t.find(".brd-transaction-list-item")}},r=function(){a.$transactions.click(function(){var a=$(this).data().id;$.event.trigger("transactionclick",[a])})},e=function(t){s();var n=moment(t.date,"DD-MM-YYYY").format("MMMM Do, YYYY");a.$title.html(n),a.$wrapper.show(),c.position="open",t&&t.transactions&&(d(t.transactions),a.$transactions=c.$formTarget.find(".brd-transaction-list-item"),r())},o=function(){a.$wrapper.hide(),c.position="closed"},i=function(a){},s=function(){a.$transactionsWrapper.html("")},d=function(t){for(var n,r,e=a.$transactionsWrapper,o=0,i=t.length;i>o;o++)n=t[o],r="brd-grid-row-"+o%2,e.append('<div class="brd-transaction-list-item '+r+'" id="transaction'+o+'" data-id="'+n.id+'">'+n.name+" - $"+n.amount+"</div>")},n=function(a){a.append(l.html),c.$formTarget=a,t(),r(),o()},{initModule:n,open:e,close:o,load:i}}(),brd.form=function(){"use strict";var a,t,n,r,e,o,i,d,s={mainHtml:['<div class="brd-form">','<div class="brd-form-head">','<button type="button" class="brd-form-exit">X</button>',"</div>",'<div class="brd-form-target">',"</div>",'<div class="brd-form-data">',"</div>","</div>"].join("")},l={$appendTarget:void 0,formOpen:void 0,child:void 0};return n=function(){var a=l.$appendTarget;t={$appendTarget:a,$form:a.find(".brd-form"),$exitButton:a.find(".brd-form-exit"),$formTarget:a.find(".brd-form-target"),$formData:a.find(".brd-form-data")}},r=function(){t.$exitButton.click(function(){o()}),$(document).on("transaction",function(a){o()}).on("newsalary",function(a){o()})},d=function(a,t){l.child===a&&brd.form[a].load(t)},e=function(){t.$form.css("display","block"),t.$form.animate({opacity:1,bottom:"95px"},"fast"),l.formOpen=!0},o=function(){t.$form.animate({opacity:0,bottom:"85px"},"fast",function(){t.$form.css("display","none"),l.child&&brd.form[l.child].close(),l.child=null}),l.formOpen=!1},i=function(a,t){return brd.form[a]?(l.child?(brd.form[l.child].close(),brd.form[a].open(t)):(e(),brd.form[a].open(t)),l.child=a,!0):!1},a=function(a,e){a.append(s.mainHtml),l.$appendTarget=a,n(),r(),brd.form.transaction.initModule(t.$formTarget),brd.form.salary.initModule(t.$formTarget,e),brd.form.day.initModule(t.$formTarget),o()},{initModule:a,open:e,close:o,show:i,load:d}}(),brd.form.salary=function(){"use strict";var a,t,n,r,e,o,i,d={html:['<div class="brd-form-salary-wrapper">','<form class="brd-form-salary">',"<fieldset>","<legend>Set your salary</legend>",'<label for="brd-salary-amt">Amount</label>','<input id="brd-salary-amt" class="brd-amt" placeholder="Amount">','<label for="brd-salary-options">Type</label>',"<fieldset>",'<select id="brd-salary-options">',"<option>Monthly</option>","<option>Semi-monthly</option>","<option>Bi-weekly</option>","<option>Weekly</option>","</select>","</fieldset>",'<button type="button" class="brd-button-submit brd-button-salary">Submit</button>',"</fieldset>","</form>","</div>"].join("")},s={$formTarget:void 0,validSalaryAmount:!1,salary:void 0,salaryType:void 0,position:void 0};return t=function(){var t=s.$formTarget;a={$formTarget:t,$wrapper:t.find(".brd-form-salary-wrapper"),$amount:t.find("#brd-salary-amt"),$options:t.find("#brd-salary-options"),$submit:t.find(".brd-button-salary")}},r=function(){a.$amount.keyup(function(a){var t=$(this),n=+t.val();window.isNaN(n)||0>n?t.addClass("brd-validation-fail"):t.removeClass("brd-validation-fail")}),a.$submit.click(function(){var t,n=+a.$amount.val(),r=s.salaryType;return n&&!isNaN(n)?(t=i(n,r),a.$wrapper.hide(),s.salary=n,s.salaryType=r,$.event.trigger("newsalary",[t,r]),!0):!1}),a.$options.change(function(){var a,t=$(this);a=t.val(),s.salaryType=a})},i=function(a,t){return"Monthly"===t?a:"Semi-monthly"===t?2*a:"Bi-weekly"===t?26*a/12:"Weekly"===t?52*a/12:void 0},e=function(){a.$wrapper.show(),s.position="open",a.$amount.val(s.salary),a.$options.val(s.salaryType)},o=function(){a.$wrapper.hide(),s.position="closed"},n=function(a,n){a.append(d.html),s.$formTarget=a,t(),r(),o(),s.salary=n.salary,s.salaryType=n.salaryType},{initModule:n,open:e,close:o}}(),brd.form.transaction=function(){"use strict";var a,t,n,r,e,o,i={html:['<div class="brd-form-transaction-wrapper">','<form class="brd-form-transaction" id="brd-form-transaction">',"<fieldset>","<legend>Create a transaction</legend>",'<fieldset class="brd-radio-fieldset">','<label for="brd-transaction-type-income" class="brd-radio">','<input id="brd-transaction-type-income" class="brd-transaction-type" type="radio" name="transactionType" value="income">',"Income","</label>",'<label for="brd-transaction-type-expense" class="brd-radio">','<input id="brd-transaction-type-expense" class="brd-transaction-type" type="radio" name="transactionType" value="expense" checked>',"Expense","</label>","</fieldset>",'<label for="brd-transaction-name">Transaction Name</label>','<input id="brd-transaction-name" placeholder="Transaction Name">','<label for="brd-transaction-amt">Amount</label>','<input id="brd-transaction-amt" class="brd-amt" placeholder="Amount">','<label for="brd-transaction-date">Date</label>','<input id="brd-transaction-date" class="brd-date" placeholder="Date">','<button type="button" class="brd-button-transaction">Submit</button>',"</fieldset>","</form>","</div>"].join(""),dateFormat:"DD-MM-YYYY",updateEvent:"update",newTransactionEvent:"transaction",validationFailCls:"brd-validation-fail"},d={$formTarget:void 0,position:void 0,validTransactionDate:!1,validTransactionAmount:!1,radioValue:"expense",submitEvent:void 0,tid:void 0},s={};return t=function(){var a=d.$formTarget;s={$formTarget:a,$wrapper:a.find(".brd-form-transaction-wrapper"),$name:a.find("#brd-transaction-name"),$amount:a.find("#brd-transaction-amt"),$date:a.find("#brd-transaction-date"),$submit:a.find(".brd-button-transaction"),$radio:a.find(".brd-transaction-type")}},n=function(a){var t,n,r;s.$wrapper.show(),d.position="open",a&&a.id?(d.submitEvent=i.updateEvent,d.tid=a.id):d.submitEvent=i.newTransactionEvent,a&&(t=a.name||s.$name.val(),n=a.amount||s.$amount.val(),r=a.date||s.$date.val(),s.$name.val(t),s.$amount.val(n),s.$date.val(r))},r=function(){s.$wrapper.hide(),d.position="closed",s.$name.val(""),s.$amount.val(""),s.$date.val(moment().format(i.dateFormat)),d.update=!1},e=function(){s.$amount.val(""),s.$name.val(""),s.$date.val(moment().format(i.dateFormat)),s.$radio.last().prop("checked",!0),d.radioValue="expense"},o=function(){s.$submit.click(function(){var a,t=+s.$amount.val(),n=s.$name.val(),o=s.$date.val(),l=d.tid;return a=moment(o,i.dateFormat),t>0&&!isNaN(t)&&a.isValid()&&n.length<=20?($.event.trigger("transaction",[n,t,o,d.radioValue,l]),e(),r(),!0):!1}),s.$amount.keyup(function(){var a=$(this),t=+a.val();window.isNaN(t)||0>t?a.addClass(i.validationFailCls):a.removeClass(i.validationFailCls)}),s.$date.keyup(function(){var a=$(this),t=moment(a.val());t.isValid()?a.removeClass(i.validationFailCls):a.addClass(i.validationFailCls)}),s.$name.keyup(function(){var a=$(this),t=a.val();t.length>20?a.addClass(i.validationFailCls):a.removeClass(i.validationFailCls)}),s.$radio.click(function(){d.radioValue=$(this).val()})},a=function(a){a.append(i.html),d.$formTarget=a,t(),o(),r(),rome(document.getElementById("brd-transaction-date"),{time:!1,inputFormat:i.dateFormat}),s.$date.val(moment().format(i.dateFormat))},{initModule:a,open:n,close:r}}(),brd.model=function(){"use strict";var a,t,n,r,e,o,i,d,s,l,c,u,m,f,b,p,v,y,h,g,m,M={isConnected:!1,anonId:"a0",monthFormat:"MM-YYYY",dayFormat:"DD-MM-YYYY"},T={user:void 0,currentMonth:void 0,tid:0,storage:void 0};return b=function(a,t,n){var r=T.user.months[n];"expense"===t?p(Math.abs(a),r):"income"===t&&v(Math.abs(a),r)},p=function(a,t){t.expenses-=a},v=function(a,t){t.income-=a},d=function(a,n,r,e,d){var c,u,m=r.slice(3);if(c=T.user.months[m],c||(c=o(m)),d){var f=T.user.months[c.date].transactions;for(var p in f)f.hasOwnProperty(p)&&f[p].id==d&&b(f[p].amount,f[p].type,c.date)}return u=i(a,n,r,e,c,d),"expense"===e?l(n,c):"income"===e&&s(n,c),t(c,u),u},s=function(a,t){t.income+=a},l=function(a,t){t.expenses+=a},t=function(a,t){T.storage.setItem(T.user.id,JSON.stringify(T.user)),$.event.trigger("modelupdate",[t,a.expenses,a.income+a.salary])},o=function(a,n,e,o,i){var d=r(a,n,e,o,i);return T.user.months[d.date]=d,t(d),T.user.months[d.date]},i=function(a,t,n,r,o,i){var d,s;return s=i||Date.now(),d=e(s,a,t,r,n),o.transactions[d.id]=d,{id:d.id,name:d.name,amount:d.amount,type:r,date:d.date}},c=function(a,n,r){T.user.salary=a,T.user.salaryType=n;var e=T.user.months[r];e.salary=a,t(e)},h=function(){return{salary:T.user.salary,salaryType:T.user.salaryType}},r=function(a,t,n,r,e){var o;return a?(T.user&&T.user.salary&&(o=T.user.salary),{date:a,income:t||0,expenses:n||0,transactions:r||{},salary:e||o||0}):!1},e=function(a,t,n,r,e){return{id:a,name:t,amount:n,type:r,date:e}},n=function(){var a,t,n=moment().format(M.monthFormat),e={};return a=r(n),e[a.date]=a,t={id:M.anonId,months:e,salary:0,salaryType:"Monthly"}},u=function(a){var t,n=T.user.months[a];return t=moment("01-"+a,"DD-MM-YYYY").endOf("month").date(),n||(n=o(a)),{date:n.date,endOfMonth:t,expenses:n.expenses,income:n.income+n.salary}},y=function(a){var t,n,r=[];if(a.length==M.monthFormat.length){if(t=T.user.months[a],t&&t.transactions)return t.transactions}else if(a.length==M.dayFormat.length&&(t=T.user.months[a.slice(3)],t&&t.transactions)){for(n in t.transactions)t.transactions.hasOwnProperty(n)&&t.transactions[n].date==a&&r.push(t.transactions[n]);return r}return!1},m=function(a){var t;for(var n in T.user.months)if(t=T.user.months[n],t.transactions.hasOwnProperty(a))return t.transactions[a];return!1},f=function(a,n,r,e){var o=T.user.months[a].transactions;for(var i in o)o.hasOwnProperty(i)&&o[i].id===n&&delete o[i];b(r,e,a),t(T.user.months[a])},g=function(){var a="test";try{return localStorage.setItem(a,"1"),localStorage.removeItem(a),localStorage}catch(t){var n=function(){var a,t,n;return a=function(a,t){this[a]=t},t=function(a){return this[a]?this[a]:null},n=function(a){delete this[a]},{setItem:a,getItem:t,removeItem:n}}();return n}},a=function(){T.storage=g();var a=T.storage.getItem(M.anonId);a?T.user=JSON.parse(a):(a=n(),T.storage.setItem(a.id,JSON.stringify(a)),T.user=a)},{initModule:a,add:d,setSalary:c,getSalary:h,addMonth:o,getMonthData:u,deleteTransaction:f,getMonthTransactions:y,getTransaction:m}}(),brd.pay=function(){"use strict";var a,t,n,r,e,o,i,d,s,l,c,u={mainHtml:['<div class="brd-pay">','<div class="brd-pay-head">','<button type="button" class="brd-form-exit">X</button>',"</div>",'<div class="brd-pay-main">','<form class="pure-form pure-form-stacked brd-form brd-transaction-form" id="brd-transaction-form">',"<fieldset>","<legend>Submit a new transaction</legend>",'<fieldset class="brd-radio-fieldset">','<label for="brd-transaction-type-income" class="pure-radio">','<input id="brd-transaction-type-income" class="brd-transaction-type" type="radio" name="transactionType" value="income">',"Income","</label>",'<label for="brd-transaction-type-expense" class="pure-radio brd-transaction-type">','<input id="brd-transaction-type-expense" class="brd-transaction-type" type="radio" name="transactionType" value="expense" checked>',"Expense","</label>","</fieldset>",'<label for="brd-transaction-name">Transaction Name</label>','<input id="brd-transaction-name" placeholder="Transaction Name">','<label for="brd-transaction-amt">Amount</label>','<input id="brd-transaction-amt" class="brd-amt" placeholder="Amount">','<label for="brd-transaction-date">Date</label>','<input id="brd-transaction-date" class="brd-date" placeholder="Date">','<button type="button" class="brd-transaction-button pure-button pure-button-primary">Submit</button>',"</fieldset>","</form>",'<form class="pure-form pure-form-stacked brd-form brd-salary-form" id="brd-salary-form">',"<fieldset>","<legend>Set your salary</legend>",'<label for="brd-salary-amt">Amount</label>','<input id="brd-salary-amt" class="brd-amt" placeholder="Amount">','<label for="brd-salary-options">Type</label>',"<fieldset>",'<select id="brd-salary-options">',"<option>Monthly</option>","<option>Semi-monthly</option>","<option>Bi-weekly</option>","<option>Weekly</option>","</select>",'<label for="brd-salary-hours"></label>','<input id="brd-salary-hours" placeholder="Hours">',"</fieldset>",'<button type="button" class="brd-salary-button pure-button pure-button-primary">Update</button>',"</fieldset>","</form>","</div>",'<div class="brd-pay-data">',"</div>","</div>"].join(""),numberRegex:/^\d+(?:\.\d{0,2})$/,dateFormat:"DD-MM-YYYY"},m={$appendTarget:void 0,formOpen:void 0,transactionFormOpen:void 0,salaryFormOpen:void 0,radioValue:"expense",position:"closed",validTransactionDate:!1,validTransactionAmount:!1,validSalaryAmount:!1,salary:void 0,salaryType:void 0},f={};return t=function(){var a=m.$appendTarget;f={$appendTarget:a,$payPanel:a.find(".brd-pay-main"),$transactionType:a.find(".brd-transaction-type"),$transactionName:a.find("#brd-transaction-name"),$transactionAmt:a.find("#brd-transaction-amt"),$transactionDate:a.find("#brd-transaction-date"),$amountFields:a.find(".brd-amt"),$dateFields:a.find(".brd-date"),$submit:a.find(".brd-transaction-button"),$update:a.find(".brd-salary-button"),$newMonthlyIncome:a.find("#brd-salary-amt"),$headerList:a.find(".brd-head-tabs li"),$forms:a.find(".brd-form"),$transactionForm:a.find(".brd-transaction-form"),$salaryForm:a.find(".brd-salary-form"),$formExit:a.find(".brd-form-exit"),$formsDiv:a.find(".brd-pay"),$salaryType:a.find("#brd-salary-options"),$hourlyForm:a.find("#brd-salary-hours"),$salaryAmount:a.find("#brd-salary-amt")}},r=function(){f.$payPanel.show()},e=function(){f.$payPanel.close()},i=function(a,t){if(f.$formsDiv.show(),f.$forms.hide(),"transaction"===a)f.$transactionForm.show(),t&&f.$transactionDate.val(t);else{if("salary"!==a)return!1;f.$salaryForm.show(),f.$salaryAmount.val(m.salary),f.$salaryType.val(m.salaryType)}},n=function(a){},l=function(a){},c=function(a,t){return"Monthly"===t?a:"Semi-monthly"===t?2*a:"Bi-weekly"===t?26*a/12:"Weekly"===t?52*a/12:void 0},o=function(){f.$submit.click(function(){var a,t=+f.$transactionAmt.val(),n=f.$transactionName.val(),r=f.$transactionDate.val();return a=moment(r,u.dateFormat),t>0&&!isNaN(t)&&a.isValid()?($.event.trigger("transaction",[n,t,r,m.radioValue]),f.$transactionAmt.val(""),f.$transactionName.val(""),f.$transactionDate.val(moment().format("DD-MM-YYYY").valueOf()),f.$transactionType.last().prop("checked",!0),m.radioValue="expense",f.$formsDiv.hide(),!0):!1}),f.$update.click(function(){var a,t=+f.$newMonthlyIncome.val(),n=m.salaryType;return t&&!isNaN(t)?(a=c(t,n),f.$formsDiv.hide(),m.salary=t,m.salaryType=n,$.event.trigger("salaryupdate",[a,n]),!0):!1}),f.$amountFields.keyup(function(){var a=$(this),t=+a.val();window.isNaN(t)||0>t?a.addClass("brd-validation-fail"):a.removeClass("brd-validation-fail")}),f.$dateFields.keyup(function(){var a=$(this),t=moment(a.val());t.isValid()?a.removeClass("brd-validation-fail"):a.addClass("brd-validation-fail")}),f.$salaryType.change(function(){var a,t=$(this);a=t.val(),m.salaryType=a,"Hourly"===a?f.$hourlyForm.show():f.$hourlyForm.hide()}),f.$formExit.click(function(){f.$formsDiv.hide()}),f.$transactionType.click(function(){m.radioValue=$(this).val()})},d=function(){$(".brd-form").hide(),$(".brd-salary-form").show()},s=function(a,t){var n,r;if(m.position===a)return!0;if("opened"===a)n="438px",r=100;else{if("closed"!==a)return!1;r=100,n=0}return!0},a=function(a,n){var r;a.append(u.mainHtml),m.$appendTarget=a,t(),o(),d(),r=document.getElementById("brd-expense-date"),rome(document.getElementById("brd-transaction-date"),{time:!1,inputFormat:"DD-MM-YYYY"}),f.$transactionDate.val(moment().format("DD-MM-YYYY").valueOf()),f.$hourlyForm.hide(),f.$formsDiv.hide(),m.salary=n.salary,m.salaryType=n.salaryType},{initModule:a,open:r,close:e,showForm:i,setPosition:s}}(),brd.shell=function(){"use strict";var a,t,n,r={mainHtml:'<div class="brd-shell-head"><div class="brd-shell-head-logo"><h1>breadWinner</h1></div></div><div class="brd-shell-main"><div class="brd-shell-main-cal-outer"><div class="brd-shell-main-cal"></div></div><div class="brd-shell-main-form"></div></div><div class="brd-shell-foot"><div class="brd-shell-main-buttons"></div></div>',dateFormat:"DD-MM-YYYY",monthDateFormat:"MM-YYYY"},e={$container:void 0},o={};return a=function(){var a=e.$container;o={$container:a,$calendar:a.find(".brd-shell-main-cal"),$form:a.find(".brd-shell-main-form"),$buttons:a.find(".brd-shell-main-buttons")}},n=function(){$(document).on("transaction",function(a,t,n,r,e,o){brd.model.add(t,n,r,e,o)}).on("newsalary",function(a,t,n){var e=moment().format(r.monthDateFormat);brd.model.setSalary(t,n,e)}).on("modelupdate",function(a,t,n,e){var o,i=brd.cal.getDate();o=t?moment(t.date,r.dateFormat):moment(),o.month()===i.month()?(t&&brd.cal.createEvent(t.name,t.amount,o,t.type,t.id),brd.bar.set(n,e,"update")):brd.cal.showMonth(o)}),$(document).on("calendarchange",function(a,t){var n=brd.model.getMonthData(t),r=brd.model.getMonthTransactions(t);brd.bar.initModule(o.$calendar,n),brd.cal.recalculate(r)}).on("deletetransaction",function(a,t){var n=+t.amount,e=t.type,o=t.id,i=t.start.format(r.monthDateFormat);brd.model.deleteTransaction(i,o,n,e)}).on("transactionclick",function(a,t){var n=brd.model.getTransaction(t);n&&brd.form.show("transaction",{name:n.name,amount:n.amount,date:n.date,id:t})}),$(document).on("transactionbuttonclick",function(){brd.form.show("transaction")}).on("salarybuttonclick",function(){brd.form.show("salary")}).on("dayclick",function(a,t){var n=t.format(r.dateFormat),e=brd.model.getMonthTransactions(n);brd.form.show("day",{transactions:e,date:n})}).on("daydbclick",function(a,t){var n=t.format(r.dateFormat);brd.form.show("transaction",{date:n})})},t=function(t){var i,d,s,l;e.$container=t,t.html(r.mainHtml),a(),n(),s=moment().format(r.monthDateFormat),i=brd.model.getMonthData(s),d=brd.model.getMonthTransactions(s),l=brd.model.getSalary(),brd.cal.initModule(o.$calendar),brd.cal.addEvents(d),brd.bar.initModule(o.$calendar,i),brd.form.initModule(o.$form,l),brd.buttons.initModule(o.$buttons)},{initModule:t}}(),brd.util=function(){var a,t;return a=function(a,t,n){var r=new Error;return r.name=a,r.message=t,n&&(r.data=n),r},t=function(t){var n,r,e=t.inputMap,o=t.settableMap,i=t.configMap;for(n in e)if(e.hasOwnProperty(n)){if(!o.hasOwnProperty(n))throw r=a("Bad Input","Setting config key |"+n+"| is not supported");i[n]=e[n]}},{makeError:a,setConfigMap:t}}();